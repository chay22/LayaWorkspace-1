var Tower=function(t){function i(){i.super(this),this.onInit()}Laya.class(i,"Tower",t),_proto=i.prototype;return _proto.TowerRadios=150,_proto.hp=1e3,_proto.hpProgress=null,_proto.anim=null,_proto.towerSp=null,_proto.onInit=function(){if(this.width=110,this.height=110,this.pivotX=55,this.pivotY=55,ShowRang){var t=new Laya.Sprite;t.graphics.drawCircle(0,0,this.TowerRadios,"#ff0000","#ff0000",1),t.x=this.pivotX,t.y=this.pivotY,this.addChild(t)}this.towerSp=new Laya.Image("game/tower.png"),this.towerSp.pivotX=70,this.towerSp.pivotY=100,this.towerSp.pos(this.pivotX,this.pivotY-30),this.addChild(this.towerSp),this.hpProgress=new Laya.ProgressBar("game/progress_xuetiao.png"),this.hpProgress.anchorX=.5,this.hpProgress.anchorY=.5,this.hpProgress.value=1,this.addChild(this.hpProgress),this.hpProgress.pos(55,-100),this.anim=new Laya.Animation,this.anim.play(0,!0,"tower_dead"),this.anim.pivotX=270,this.anim.pivotY=242,this.anim.interval=150,this.anim.pos(this.pivotX,this.pivotY),this.addChild(this.anim),this.anim.visible=!1},_proto.onDestroy=function(){},_proto.addHp=function(t){this.hp+=t,this.hp>1e3&&(this.hp=1e3),BubbleScoreAnim(new Point(this.x,this.y-200),"+"+t)},_proto.resetHp=function(){this.hp=1e3,this.hpProgress.value=1,this.hpProgress.visible=!0,this.towerSp.visible=!0,this.anim.visible=!1},_proto.onUpdate=function(){this.hp<=1e3&&(this.hpProgress.value=this.hp/1e3)},_proto.hurtMonster=function(t){this.hp-=t,this.hp>0?this.hpProgress.value=this.hp/1e3:this.towerDead()},_proto.towerDead=function(){this.hpProgress.value=0,Gamelog("----------防御塔挂掉了-----"),MusicManager.getInstance().playSound("res/music/tower_dead.wav"),this.hpProgress.visible=!1,this.towerSp.visible=!1,this.anim.visible=!0,this.anim.play(0,!1,"tower_dead"),this.anim.on(Laya.Event.COMPLETE,this,this.onPlayDeadComplete);var t=new Notification("Tower_Dead",this,this);MessageController.getInstance().SendNotification(t)},_proto.onPlayDeadComplete=function(){this.anim.visible=!1},_proto.isInCircle=function(t){var i=this.parent.globalToLocal(new Point(t.x,t.y),!0);return Number(Math.pow(i.x-this.x,2)+Math.pow(i.y-this.y,2))<Math.pow(this.TowerRadios,2)},i}(Laya.Sprite);